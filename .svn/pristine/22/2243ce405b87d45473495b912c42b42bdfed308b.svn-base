<!-- 
 * == 개정이력(Modification Information) ==
 *   
 *   수정일      			수정자           수정내용
 *  ============   	============== =======================
 *  2025. 4. 11.     	손현진            최초 생성
 *
-->
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<div class="content-area">
  <div class="compose-mail-wrapper">
    <h3><i class="fa-solid fa-envelope"></i> 메일 작성</h3>
    <form id="sendMailForm" class="compose-mail-form">
        <input type="hidden" name="empId" value="${realUser.empId}">

        <label for="toEmail">받는 사람</label>
        <input type="email" name="toEmail" id="toEmail" required>

        <label for="sentNmLog">제목</label>
        <input type="text" name="sentNmLog" id="sentNmLog" required>

        <label for="sentCotentLog">내용</label>
        <textarea name="sentCotentLog" id="sentCotentLog" rows="10" required></textarea>

        <button type="submit">보내기</button>
    </form>
  </div>
</div>

<script>
$('#sendMailForm').on('submit', function(e) {
    e.preventDefault();
    $.ajax({
        url: contextPath + "/" + companyNo + "/mail/send",
        type: "POST",
        data: $(this).serialize(),
        success: function(result) {
            if(result === 'success') {
                alert("메일이 성공적으로 전송되었습니다.");
                location.href = contextPath + "/" + companyNo + "/mail"; // 메일 목록으로 이동
            } else {
                alert("메일 전송 실패");
            }
        }
    });
});

</script>

<script defer="defer">
document.addEventListener("DOMContentLoaded", () => {
	CKEDITOR.replace('sentCotentLog', {
		versionCheck: false,
        height: 600, // 원하는 높이(px)
        width: '100%' // 가로 크기(퍼센트 또는 px)
    });
});
</script>