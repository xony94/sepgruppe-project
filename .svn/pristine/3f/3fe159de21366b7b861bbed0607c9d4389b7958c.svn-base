<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.works.mybatis.mappers.MailMapper">

<select id="selectMailList" resultType="MailReceptionVO">
	SELECT
		MAIL_NO,
		MAIL_ID,
		MAIL_SENDER,
		MAIL_RECEIVER,
		MAIL_SUBJECT,
		MAIL_CONTENT,
		MAIL_DATE,
		MAIL_READ_YN,
		MAIL_FAV
	FROM MAIL_RECEPTION
</select>	

<select id="selectFavoriteMailIds" parameterType="string" resultType="string">
    SELECT MAIL_ID
    FROM MAIL_RECEPTION
    WHERE EMP_ID = #{empId}
      AND MAIL_FAV = 1
</select>


<insert id="insertFavorite" parameterType="map">
    INSERT INTO MAIL_RECEPTION (
    	MAIL_RECP_NO
    	, EMP_ID
    	, MAIL_ID
    	) VALUES (
    	mail_seq.NEXTVAL   	
    	, #{empId}
    	, #{mailId}
    )
</insert>

<update id="updateFavorite" parameterType="map">
    UPDATE 
    	MAIL_RECEPTION
    SET 
    	MAIL_FAV = #{mailFav}
    WHERE MAIL_RECP_NO = #{mailRecpNo}
</update>


<delete id="deleteFavorite" parameterType="map">
    DELETE 
    FROM MAIL_RECEPTION
    WHERE EMP_ID = #{empId} AND MAIL_ID = #{mailId}
</delete>

<select id="selectFavoriteMails" parameterType="string" resultType="string">
    SELECT 
    	MAIL_ID
    FROM MAIL_RECEPTION
    WHERE MAIL_ID = #{mailId}
</select>

<select id="selectFavoriteMailList" parameterType="string" resultType="MailReceptionVO">
    SELECT *
    FROM MAIL_RECEPTION
    WHERE EMP_ID = #{empId}
      AND MAIL_FAV = 1
    ORDER BY MAIL_RECP_NO DESC
</select>




</mapper>
