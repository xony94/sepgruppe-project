<!-- 
 * == 개정이력(Modification Information) ==
 *   
 *   수정일      			수정자           수정내용
 *  ============   	============== =======================
 *  2025. 3. 21.     	손현진            최초 생성
 *
-->
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
</head>
<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/sepgruppe/css/subscriptionPlan.css" />
<body>

<div class="subcontainer">
  <!-- 좌측 입력 폼 영역 -->
  <div class="form-left">
    <!-- 사용자 수 입력 -->
    <div class="input-group">
      <h2>사용자 수를 입력해주세요.</h2>
      <input type="number" name="userCount" min="1" placeholder="예: 10" />
    </div>
	
    <!-- 제품 유형 선택 -->
      <h2>구독 신청 유형  </h2>
    <div class="input-group">
    <div>
      <label>
        <input type="radio" name="productType" value="Basic" />
        Basic
      </label>
      <label>
        <input type="radio" name="productType" value="Standard" />
        Standard
      </label>
      <label>
        <input type="radio" name="productType" value="Professional" />
        Professional
      </label>
     </div>
    </div>

    <!-- 결제 방식 선택 -->
      <h2>결제 방식</h2>
    <div class="input-group">
      <div>
      <label>
        <input type="radio" name="paymentMethod" value="yearly" />
        1년 결제 (15% 할인)
      </label>
      <label>
        <input type="radio" name="paymentMethod" value="monthly" />
        월 결제
      </label>
      </div>
    </div>

  </div>

  <!-- 우측 요약 영역 -->
  <div class="form-right">
    <h3>월 결제 금액</h3>
    <!-- 실제 로직으로 동적으로 변경될 수 있는 영역 -->
    <div class="price">50,000원 <span>(부가세 별도)</span></div>
    <div class="usage">
      <p>기본요금: 40,000원</p>
      <p>추가요금: 10,000원</p>
      <p>총 합계: 50,000원</p>
    </div>
    
    <div class="notice">
    구독 플랜 공지
    </div>

    <button type="submit">결제하기</button>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // 모든 라디오 버튼을 선택
    const radioButtons = document.querySelectorAll('input[type="radio"]');
    
    // 각 라디오 버튼에 change 이벤트 리스너 등록
    radioButtons.forEach(function(radio) {
      radio.addEventListener('change', function(event) {
        // 변경된 라디오의 name, value 값
        const paramName = event.target.name;       // 예: "productType"
        const paramValue = event.target.value;     // 예: "Basic", "Standard" 등
        
        // 서버에 보낼 데이터(예시: JSON)
        const requestData = {
          [paramName]: paramValue
        };
        
        // Fetch API를 사용한 비동기 요청
        fetch('/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(requestData)
        })
        .then(response => response.json())
        .then(data => {
          // 서버에서 받은 응답 데이터를 처리
          console.log('서버 응답 데이터:', data);
          // 예: data 안의 금액 정보를 우측 요약 영역에 반영
          // document.querySelector('.price').innerText = data.updatedPrice + '원 (부가세 별도)';
          // document.querySelector('.usage p:nth-child(1)').innerText = data.usageInfo;
        })
        .catch(error => {
          console.error('에러 발생:', error);
        });
      });
    });
  });
</script>
</body>
</html>
