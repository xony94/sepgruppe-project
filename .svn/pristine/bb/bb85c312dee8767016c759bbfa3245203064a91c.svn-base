<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.works.mybatis.mappers.TaskMapper">
	
	 <select id="selectListAllTask" resultType="kr.or.ddit.works.project.vo.TaskVO">
        SELECT 
            t.TASK_NO,
            t.PROJECT_NO,
            t.PROJECT_PARTICIPANT_NO,
            t.EMP_ID,
            e.EMP_NM,
            t.TASK_TITLE,
            t.TASK_CONTENT,
            t.PROGRESS,
            t.IMPORTANCE,
            t.PRIORITY,
            t.TASK_CREATE_DATE AS TASK_CREATE_DATE,
            t.TASK_START_DATE AS TASK_START_DATE,
            t.TASK_END_DATE AS TASK_END_DATE,
            t.TASK_UPDATE_DATE AS TASK_UPDATE_DATE,
            t.FILE_GROUP_NO,
            p.PROJECT_TITLE
        FROM 
            task t
        JOIN 
            project p ON t.PROJECT_NO = p.PROJECT_NO
        JOIN 
            employee e ON t.EMP_ID = e.EMP_ID
    </select>
    
     <select id="selectTaskDetail" resultType="kr.or.ddit.works.project.vo.TaskVO">
        SELECT 
            t.TASK_TITLE AS taskTitle,          -- 업무 제목
            t.TASK_CONTENT AS taskContent,      -- 업무 내용
            t.PROGRESS AS progress,              -- 진행율
            t.TASK_START_DATE AS taskStartDate, -- 업무 시작일자
            t.TASK_END_DATE AS taskEndDate,     -- 업무 마감일자
            e.EMP_NM AS empNm,                   -- 사원이름
            t.TASK_CREATE_DATE AS taskCreateDate  -- 업무 생성일자
        FROM 
            task t
        JOIN 
            employee e ON t.EMP_ID = e.EMP_ID
        WHERE 
            t.TASK_NO = #{taskNo}
    </select>
    
    <select id="getNextTaskNo" resultType="int">
	    SELECT MIN(TASK_NO) 
	    FROM task 
	    WHERE TASK_NO &gt; #{currentTaskNo}
	</select>
    
   <select id="getPreviousTaskNo" resultType="int">
	    SELECT MAX(TASK_NO) 
	    FROM task 
	    WHERE TASK_NO &lt; #{currentTaskNo}
	</select>
    
</mapper>