<!-- 
 * == ê°œì •ì´ë ¥(Modification Information) ==
 *   
 *   ìˆ˜ì •ì¼       			ìˆ˜ì •ì           ìˆ˜ì •ë‚´ìš©
 *  ============   	============== =======================
 *  2025. 3. 15.      	JYS            ì²«ì´‰ ìƒì„±
 *
-->
<!-- 
 * @author SJH
 * @since 2025. 3. 25.
 */
-->
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<html>
<head>
    <title>ì„¤ë¬¸ ë¦¬ìŠ¤íŠ¸</title>

    <!-- âœ… Bootstrap + DataTables CSS -->
    <link href="${pageContext.request.contextPath}/resources/css/surveyList.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>
<body class="p-4">

    <!-- âœ… ìµœê·¼ ìƒì„±ëœ ì„¤ë¬¸ -->
    <div class="card mb-4">
        <div class="card-header fw-bold">ğŸ“Œ ìµœê·¼ ìƒì„±ëœ ì„¤ë¬¸</div>
        <div class="card-body">
            <table id="recentSurveyTable" class="table table-bordered">
			    <thead>
				  <tr>
				    <th>NO</th>
				    <th>ì œëª©</th>
				    <th>ìƒì„±ì¼</th>
				    <th>ìƒì„±ì</th>
				  </tr>
				</thead>
				<tbody>
				  <c:forEach var="survey" items="${recentSurveyList}" varStatus="vs">
				    <tr>
				      <td>${vs.index + 1}</td>
				      <td>
				        <a href="${pageContext.request.contextPath}/${companyNo}/surveyApi/surveys/${survey.surveyId}/details">
				          ${survey.title}
				        </a>
				      </td>
				      <td>
				        <c:choose>
				          <c:when test="${not empty survey.dateCreated}">
				            ${fn:substring(survey.dateCreated, 0, 10)}
				          </c:when>
				          <c:otherwise>
				            -
				          </c:otherwise>
				        </c:choose>
				      </td>
				      <td>${survey.creator}</td>
				    </tr>
				  </c:forEach>
				</tbody>
			</table>
        </div>
    </div>

    <!-- âœ… ë§ˆê°ëœ ì„¤ë¬¸ -->
    <div class="card mb-4">
        <div class="card-header fw-bold">ğŸ“ ë§ˆê°ëœ ì„¤ë¬¸</div>
        <div class="card-body">
            <table id="closedSurveyTable" class="table table-bordered">
			    <thead>
			        <tr>
			            <th>NO</th>
			            <th>ì œëª©</th>
			            <th>ìƒì„±ì¼</th>   
        				<th>ìƒì„±ì</th>   
			        </tr>
			    </thead>
			    <tbody>
				  <c:forEach var="survey" items="${recentSurveyList}" varStatus="vs">
				    <tr>
				      <td>${vs.index + 1}</td>
				      <td>
				        <a href="${pageContext.request.contextPath}/${companyNo}/surveyApi/surveys/${survey.surveyId}/results">
				          ${survey.title}
				        </a>
				      </td>
				      <td>
				        <c:choose>
				          <c:when test="${not empty survey.dateCreated}">
				            ${fn:substring(survey.dateCreated, 0, 10)}
				          </c:when>
				          <c:otherwise>
				            -
				          </c:otherwise>
				        </c:choose>
				      </td>
				      <td>${survey.creator}</td>
				    </tr>
				  </c:forEach>
				</tbody>
			</table>
        </div>
    </div>

    <!-- âœ… JS: jQuery + Bootstrap + DataTables -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

    <script>
    $(document).ready(function () {
        // âœ… ê³µí†µ DataTable ì„¤ì •
        const defaultDataTableOptions = {
            language: {
                search: "ê²€ìƒ‰:",
                lengthMenu: "_MENU_ í•­ëª© ë³´ê¸°",
                info: "ì´ _TOTAL_ê°œ ì¤‘ _START_ ~ _END_",
                paginate: {
                    previous: "ì´ì „",
                    next: "ë‹¤ìŒ"
                },
                zeroRecords: "ì¼ì¹˜í•˜ëŠ” ì„¤ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤"
            }
        };

        // âœ… ì—¬ëŸ¬ í…Œì´ë¸”ì— ë°˜ë³µ ì ìš©
        ['#recentSurveyTable', '#closedSurveyTable'].forEach(function (selector) {
            $(selector).DataTable(defaultDataTableOptions);
        });
    });
    </script>
</body>
</html>